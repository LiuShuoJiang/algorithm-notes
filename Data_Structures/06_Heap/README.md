# 堆

如何手写堆？

**堆**是一个**完全二叉树**：除了最后一层节点外，上面所有层节点都是满的，最后一层节点从左到右依次排布。

堆的类型：

- **小根堆**(这里讨论)：每个点的值都小于等于左右儿子的值，则根节点是最小值所在的点。
- **大根堆**：父节点的值大于等于其子节点的值。

堆的存储方式：用一维数组存储。1号点是根节点，每个节点的左儿子下标为`2*x`，右儿子下标为`2*x + 1`

基本函数：

- `down(x)`：往下调整
- `up(x)`：往上调整

堆的操作(下标从1开始)：

- 插入一个数：在整个堆的最后一个位置插入`x`，也就是需要先把新元素从堆尾插入，再逐层上浮到合适位置 (`heap[++size] = x; up(size);`)
- 求集合当中的最小值
- 删除最小值：(删除堆的顶点)把整个堆的最后一个元素覆盖掉堆顶元素，也就是先把尾元素移到根上，再逐层下沉到合适位置 (`heap[1] = heap[size]; size--; down(1);`)
- (STL无内置实现)删除任意一个元素：删除第`k`个点(`heap[k] = heap[size]; size--; down(1); down(k); up(k);`) 注意这里`down`和`up`只会执行一个
- (STL无内置实现)修改任意一个元素：修改第`k`个点(`heap[k] = x; down(k); up(k);`)

